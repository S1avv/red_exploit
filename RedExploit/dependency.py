import subprocess
import json

def dependency_chkr():
    try:
        result = subprocess.run(["go", "version"], check=True, capture_output=True, text=True)
    
        return True
    except:
        pass

    while True:
        try:
            with open("RedExploit/configure/c.json", 'r') as f:
                data = json.load(f)

            result = subprocess.run([data["go"], "version"], check=True, capture_output=True, text=True)

            break
        except FileNotFoundError:
            print("ERROR: RedExploit requires a Go compiler to be installed.")
            print("â–· Please visit the official Go website to install it: https://golang.org/\n")

            path = input("Or if you have a Go compiler but the error is visible, write the full path to the compiler: ")

            data = {
                "go": path
            }

            with open("RedExploit/configure/c.json", 'w') as f:
                json.dump(data, f, indent=4)

    return True
